<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>vaLe - Background</title>
  <link rel="icon" type="image/png" href="/images/vale-logo-removebg-preview.png">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Feather icons -->
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <style>
    @font-face {
      font-family: 'Plunct';
      src: url('/fonts/Plunct.woff2') format('woff2'),
           url('/fonts/Plunct.woff') format('woff'),
           url('/fonts/Plunct.otf') format('opentype');
      font-display: swap;
      font-weight: 400;
      font-style: normal;
    }

    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      font-family: 'Plunct', system-ui, sans-serif;
      color: #fff;
      background: url('/images/techdiff.gif') center center repeat;
      background-size: cover;
      background-color: black;
    }

    .site-overlay::before {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      z-index: 0;
    }

    .site-content { position: relative; z-index: 10; }

    #valeLogo {
      height: clamp(48px, 8vw, 120px);
      width: auto;
      transition: height 220ms ease, transform 220ms ease;
      display: block;
    }

    header.scrolled nav {
      backdrop-filter: blur(4px);
      background: rgba(0,0,0,0.35);
    }

    #mobileNav {
      transition: max-height 280ms ease, opacity 220ms ease;
    }
  </style>
</head>

<body class="site-overlay relative z-0">
  <div class="site-content">
    <header id="siteHeader" class="fixed w-full z-50">
      <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
        <!-- Logo + Brand -->
        <div class="flex items-center space-x-3">
          <img id="valeLogo" src="/images/vale-logo-removebg-preview.png" alt="vaLe logo" />
          <a href="/" class="font-plunct text-xl font-bold leading-none" id="brandText">vaLe.</a>
        </div>

        <!-- Desktop Nav -->
        <div class="hidden md:flex space-x-8 items-center uppercase tracking-wider">
          <a href="/HOME/" class="hover:text-yellow-400 transition-colors">HOME</a>
          <a href="/MUSIC/" class="hover:text-yellow-400 transition-colors">MUSIC</a>
          <a href="/SHOP/" class="hover:text-yellow-400 transition-colors">SHOP</a>
          <a href="/ABOUT/" class="hover:text-yellow-400 transition-colors">ABOUT</a>
          <a href="/CONTACT/" class="hover:text-yellow-400 transition-colors">CONTACT</a>
        </div>

        <!-- Mobile Menu Button -->
        <div class="md:hidden">
          <button id="menuBtn" aria-controls="mobileNav" aria-expanded="false" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400">
            <i data-feather="menu"></i>
          </button>
        </div>
      </nav>

      <!-- Mobile Nav -->
      <div id="mobileNav" class="md:hidden container mx-auto px-6 overflow-hidden hidden">
        <div class="flex flex-col bg-black/80 py-4 rounded-b-lg space-y-2">
          <a href="/HOME/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">HOME</a>
          <a href="/MUSIC/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">MUSIC</a>
          <a href="/SHOP/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">SHOP</a>
          <a href="/ABOUT/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">ABOUT</a>
          <a href="/CONTACT/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">CONTACT</a>
        </div>
      </div>
    </header>
  </div>

  <script>
    feather.replace();

    const logo = document.getElementById('valeLogo');
    const brandText = document.getElementById('brandText');
    const header = document.getElementById('siteHeader');
    const menuBtn = document.getElementById('menuBtn');
    const mobileNav = document.getElementById('mobileNav');

    let naturalLogoHeight = null;

    function recordNaturalHeight() {
      logo.style.height = '';
      const rect = logo.getBoundingClientRect();
      naturalLogoHeight = rect.height || 64;
      logo.style.height = naturalLogoHeight + 'px';
    }

    function shrinkLogoToText() {
      const targetHeight = brandText.getBoundingClientRect().height;
      const minHeight = Math.min(28, targetHeight);
      logo.style.height = Math.max(targetHeight, minHeight) + 'px';
      logo.style.transform = 'translateY(0)';
    }

    function restoreLogo() {
      if (naturalLogoHeight) {
        logo.style.height = naturalLogoHeight + 'px';
        logo.style.transform = '';
      }
    }

    function onScroll() {
      if (window.scrollY > 60) {
        if (!header.classList.contains('scrolled')) {
          header.classList.add('scrolled');
          shrinkLogoToText();
        }
      } else {
        if (header.classList.contains('scrolled')) {
          header.classList.remove('scrolled');
          restoreLogo();
        }
      }
    }

    function toggleMobileMenu(forceState) {
      const expanded = menuBtn.getAttribute('aria-expanded') === 'true';
      const willExpand = typeof forceState === 'boolean' ? forceState : !expanded;
      menuBtn.setAttribute('aria-expanded', String(!!willExpand));
      if (willExpand) {
        mobileNav.classList.remove('hidden');
        mobileNav.style.maxHeight = '400px';
        mobileNav.style.opacity = '1';
      } else {
        mobileNav.style.maxHeight = '0';
        mobileNav.style.opacity = '0';
        setTimeout(() => mobileNav.classList.add('hidden'), 280);
      }
      feather.replace();
    }

    document.addEventListener('click', (e) => {
      if (window.innerWidth >= 768) return;
      if (!menuBtn.contains(e.target) && !mobileNav.contains(e.target) && menuBtn.getAttribute('aria-expanded') === 'true') {
        toggleMobileMenu(false);
      }
    });

    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', recordNaturalHeight);
    window.addEventListener('orientationchange', recordNaturalHeight);

    menuBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      toggleMobileMenu();
    });

    document.addEventListener('DOMContentLoaded', () => {
      feather.replace();
      recordNaturalHeight();
      onScroll();
    });
  </script>
</body>
</html>
