<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Grin & Glisten — aL vaLe Merch (styled)</title>
  <link rel="icon" type="image/png" href="/images/vale-logo-removebg-preview.png">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Feather icons -->
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <!-- Snipcart (cart functionality) -->
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.css" />
  <script async src="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.js"></script>

  <style>
    /* Plunct font (same as your aL vaLe site). Keep local files in /fonts/ */
    @font-face {
      font-family: 'Plunct';
      src: url('/fonts/Plunct.woff2') format('woff2'),
           url('/fonts/Plunct.woff') format('woff'),
           url('/fonts/Plunct.otf') format('opentype');
      font-display: swap;
      font-weight: 400;
      font-style: normal;
    }

    :root{
      --gold:#D4AF37; --black:#000; --white:#fff; --veer-deep:#B30000;
    }

    html, body { height:100%; margin:0; background: #000; font-family: 'Plunct', system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; color:#fff; }

    body {
      background-image: url('/images/tv-static4.gif');
      background-repeat: repeat;
      background-position: center;
      background-size: auto;
    }

    .site-overlay::before{
      content:""; position:fixed; inset:0; background:rgba(0,0,0,0.45); pointer-events:none; z-index:0;
    }
    .site-content{ position:relative; z-index:10; }

    /* Header / logo (aL vaLe) */
    #valeLogo { height: clamp(48px, 8vw, 120px); width:auto; transition: height 220ms ease, transform 220ms ease; display:block; }
    header.scrolled nav { backdrop-filter: blur(4px); background: rgba(0,0,0,0.35); }

    /* Small utility */
    .text-outline { -webkit-text-stroke: 1px white; color: transparent; }
    .hover-scale { transition: transform 0.3s ease; } .hover-scale:hover { transform: scale(1.05); }
    .font-plunct{ font-family:'Plunct', sans-serif; }

    /* curated grid / panels (inspired by Grin & Glisten styling, but dark theme) */
    .filter-panel{ position:sticky; top:96px; max-height:calc(100vh - 110px); overflow:auto; padding-right:8px; background:rgba(255,255,255,0.02); border-radius:12px; border:1px solid rgba(255,255,255,0.03); }
    .curated-grid { display:grid; grid-template-columns: repeat(3,1fr); gap:1rem; }
    @media (max-width:1024px){ .curated-grid { grid-template-columns: repeat(2,1fr); } }
    @media (max-width:640px){ .curated-grid { grid-template-columns: 1fr; } }

    .product-card{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); border-radius:10px; overflow:hidden; box-shadow: 0 8px 40px rgba(0,0,0,0.6); transition: transform .18s ease; }
    .product-card:hover { transform: translateY(-6px); }

    .badge-gold{ background:var(--gold); color:#000; font-weight:900; padding:4px 8px; border-radius:6px; font-size:11px; }

    .subtype-link { display:flex; justify-content:space-between; align-items:center; gap:8px; padding:8px 10px; border-radius:8px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); color:#fff; text-decoration:none; }
    .subtype-badge { background:rgba(255,255,255,0.04); padding:2px 8px; border-radius:9999px; font-size:12px; color:#fff; }

    .share-btn { margin-left:8px; background:transparent; border:none; cursor:pointer; width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; border-radius:6px; color:var(--gold); }
    .share-toast { position:fixed; bottom:18px; right:18px; background:#111; color:#fff; padding:8px 12px; border-radius:8px; font-size:13px; opacity:0.96; z-index:99999; }

    /* small responsive tweaks */
    @media (max-width:768px){
      .filter-panel { position:static; max-height:none; }
      .curated-grid { grid-template-columns: 1fr; }
    }

    /* mobile nav transition helpers */
    #mobileNav { transition: max-height 280ms ease, opacity 220ms ease; overflow:hidden; }
  </style>
</head>
<body class="site-overlay">
  <div class="site-content">
    <!-- Header adapted from aL vaLe (branding changed to Grin & Glisten where appropriate) -->
    <header id="siteHeader" class="fixed w-full z-50">
      <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
          <img id="valeLogo" src="/images/vale-logo-removebg-preview.png" alt="vaLe / Grin & Glisten logo" />
          <a href="/" class="font-plunct text-xl font-bold leading-none" id="brandText">Grin & Glisten</a>
        </div>

        <div class="hidden md:flex space-x-8 items-center">
          <a href="/Home/" class="hover:text-yellow-400 transition-colors uppercase tracking-wider">HOME</a>
          <a href="/AllProducts/" class="hover:text-yellow-400 transition-colors uppercase tracking-wider">SHOP</a>
          <a href="/HowToOrder/" class="hover:text-yellow-400 transition-colors uppercase tracking-wider">HOW TO ORDER</a>
          <a href="/Gallery/" class="hover:text-yellow-400 transition-colors uppercase tracking-wider">GALLERY</a>
        </div>

        <!-- mobile menu button -->
        <div class="md:hidden">
          <button id="menuBtn" aria-controls="mobileNav" aria-expanded="false" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400" title="Open menu">
            <i data-feather="menu"></i>
          </button>
        </div>
      </nav>

      <!-- mobile nav -->
      <div id="mobileNav" class="md:hidden container mx-auto px-6 hidden">
        <div class="flex flex-col bg-black/80 py-4 rounded-b-lg space-y-2">
          <a href="/Home/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">HOME</a>
          <a href="/AllProducts/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">SHOP</a>
          <a href="/HowToOrder/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">HOW TO ORDER</a>
          <a href="/Gallery/" class="block px-4 py-2 uppercase tracking-wider hover:text-yellow-400">GALLERY</a>
        </div>
      </div>
    </header>

    <!-- HERO (small banner area; echoes the merch page copy) -->
    <main class="min-h-screen flex items-start pt-36">
      <div class="container mx-auto px-6 py-8">
        <div class="max-w-4xl mx-auto text-center mb-8">
          <h1 class="font-plunct text-5xl md:text-6xl font-bold mb-3 text-yellow-400"><span class="text-outline">aL vaLe</span> — merch</h1>
          <p class="text-lg md:text-xl opacity-90">Official merch drops & limited vibe pieces from Grin & Glisten.</p>
        </div>

        <div class="flex flex-col md:flex-row gap-8">
          <!-- Sidebar: filters / subtypes -->
          <aside class="md:w-1/4">
            <div class="filter-panel p-6 monument">
              <h3 class="font-medium text-lg mb-4">Explore</h3>

              <div class="space-y-3">
                <a id="linkViewAll" href="/AllProducts/?category=aLvaLemerCh" class="block py-2 px-3 border rounded-md text-sm">View all aL vaLe merch</a>

                <div class="mt-4">
                  <h4 class="font-medium mb-2">By style</h4>
                  <div id="subtypeLinks" class="space-y-2"></div>
                </div>

                <div class="mt-6">
                  <h4 class="font-medium mb-2">Quick info</h4>
                  <p class="text-sm">Small-batch merch, signed drops, and limited edition prints. Free shipping over $150.</p>
                </div>
              </div>
            </div>
          </aside>

          <!-- Main: curated grid -->
          <main class="md:w-3/4">
            <div class="flex justify-between items-center mb-6">
              <div>
                <h2 class="text-2xl font-bold" id="featuredTitle">Featured aL vaLe Merch</h2>
                <p class="text-sm text-gray-300 mt-1" id="featuredSubtitle">Limited drops & bestsellers.</p>
              </div>
              <div>
                <a id="viewAllTop" class="bg-white text-black px-4 py-2 rounded-md inline-block" href="/AllProducts/?category=aLvaLemerCh">View all merch</a>
              </div>
            </div>

            <div id="curatedGrid" class="curated-grid"></div>

            <div class="mt-8 text-center">
              <a id="viewAllBottom" class="bg-white text-black px-4 py-2 rounded-md inline-block" href="/AllProducts/?category=aLvaLemerCh">See every aL vaLe item</a>
            </div>
          </main>
        </div>
      </div>
    </main>

    <!-- Footer (simple, consistent with aL vaLe look) -->
    <footer class="py-12">
      <div class="container mx-auto px-6">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="mb-6 md:mb-0">
            <div class="flex items-center space-x-2">
              <span class="font-plunct text-xl font-bold">Grin & Glisten</span>
            </div>
            <p class="text-gray-400 mt-2">© 2025 Grin & Glisten — aL vaLe merch</p>
          </div>

          <div class="flex space-x-6">
            <a href="#" aria-label="Twitter"><i data-feather="twitter" class="text-yellow-400 hover:text-yellow-400 transition-colors"></i></a>
            <a href="https://instagram.com/vale.tones" aria-label="Instagram" target="_blank" rel="noreferrer"><i data-feather="instagram" class="text-yellow-400"></i></a>
            <a href="#" aria-label="Spotify"><i data-feather="headphones" class="text-yellow-400"></i></a>
            <a href="#" aria-label="YouTube"><i data-feather="youtube" class="text-yellow-400"></i></a>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <!-- Snipcart root (replace YOUR_SNIPCART_API_KEY) -->
  <div hidden id="snipcart" data-api-key="YOUR_SNIPCART_API_KEY"></div>

  <!-- Scripts: combine aL vaLe header interactions + Grin & Glisten product UX -->
  <script>
    // === ICONS ===
    feather.replace();

    // === Header / mobile nav behavior (from aL vaLe) ===
    const logo = document.getElementById('valeLogo');
    const brandText = document.getElementById('brandText');
    const header = document.getElementById('siteHeader');
    const menuBtn = document.getElementById('menuBtn');
    const mobileNav = document.getElementById('mobileNav');

    let naturalLogoHeight = null;
    function recordNaturalHeight(){
      logo.style.height = '';
      const rect = logo.getBoundingClientRect();
      naturalLogoHeight = rect.height || 64;
      logo.style.height = naturalLogoHeight + 'px';
    }
    function shrinkLogoToText(){
      const targetHeight = brandText.getBoundingClientRect().height || 28;
      logo.style.height = Math.max(targetHeight, 28) + 'px';
    }
    function restoreLogo(){
      if(naturalLogoHeight) logo.style.height = naturalLogoHeight + 'px';
    }
    let scrollThreshold = 60;
    function onScroll(){
      if(window.scrollY > scrollThreshold){
        if(!header.classList.contains('scrolled')){
          header.classList.add('scrolled');
          shrinkLogoToText();
        }
      } else {
        if(header.classList.contains('scrolled')){
          header.classList.remove('scrolled');
          restoreLogo();
        }
      }
    }
    function toggleMobileMenu(forceState){
      const expanded = menuBtn.getAttribute('aria-expanded') === 'true';
      const willExpand = typeof forceState === 'boolean' ? forceState : !expanded;
      menuBtn.setAttribute('aria-expanded', String(!!willExpand));
      if(willExpand){
        mobileNav.classList.remove('hidden');
        mobileNav.style.maxHeight = '400px';
        mobileNav.style.opacity = '1';
      } else {
        mobileNav.style.maxHeight = '0';
        mobileNav.style.opacity = '0';
        setTimeout(()=> mobileNav.classList.add('hidden'), 280);
      }
      feather.replace();
    }
    document.addEventListener('click', (e)=>{
      if(window.innerWidth >= 768) return;
      if(!menuBtn.contains(e.target) && !mobileNav.contains(e.target) && menuBtn.getAttribute('aria-expanded') === 'true'){
        toggleMobileMenu(false);
      }
    });
    window.addEventListener('scroll', onScroll, { passive:true });
    window.addEventListener('resize', ()=> {
      recordNaturalHeight();
      if(header.classList.contains('scrolled')) shrinkLogoToText(); else restoreLogo();
    });
    menuBtn?.addEventListener('click', (e)=> { e.stopPropagation(); toggleMobileMenu(); });

    document.addEventListener('DOMContentLoaded', ()=> {
      feather.replace();
      recordNaturalHeight();
      onScroll();
      buildDemoProducts();           // demo products (replace with canonical data in prod)
      initCategoryHeroAndLinks();
      renderCuratedProducts();
      initHeaderSearch();
      initMobileSearch();
    });

    /* ------------------------------
       Product demo + data structures
       (this mirrors Grin & Glisten product UX)
       Replace buildDemoProducts with your canonical product dataset in production
    ------------------------------ */

    const CATEGORY_NAME = 'aL vaLe';
    const CATEGORY_SLUG = 'aLvaLemerCh';
    const CATEGORY_TAGLINE = 'Official merch & limited drops from aL vaLe.';
    const BANNER_URL = '/images/avale-banner.gif';
    const CURATED_IDS = []; // set ints to pick curated, otherwise auto picks featured

    // SUBTYPES for merch (display names)
    const SUBTYPES = ['Merch'];

    const subtypesMap = {
      'Earrings': ['Hoops','Studs','Dangles'],
      'Nail Jewelry': ['Full-Cover Press-Ons','Accent Tips','Resin-Embedded Nails'],
      'Grillz': ['Full-Cover Sets','Half-Cover / Open-Face','Top Sets','Bottom Sets','Single-Tooth / Cap','Resin-Embedded Specials'],
      'aL vaLe': ['Merch'],
      'Veerwear': ['Apparel']
    };

    function techniqueFromSubtype(sub){
      if(!sub) return '';
      const s = sub.toLowerCase();
      if(s.includes('full-cover') || s.includes('full cover')) return 'Full-Cover';
      if(s.includes('resin')) return 'Resin-Embedded';
      if(s.includes('accent') || s.includes('single')) return 'Accent';
      if(s.includes('3d') || s.includes('sculpt')) return '3D Sculpt';
      return '';
    }

    // Canonical mapping: display -> slug (used for style=slug in AllProducts links)
    const displayToSlug = {
      'Merch':'merch',
      'Apparel':'apparel',
      'Full-Cover Sets':'full-cover-sets',
      'Half-Cover / Open-Face':'half-cover-open-face',
      'Top Sets':'top-sets',
      'Bottom Sets':'bottom-sets',
      'Single-Tooth / Cap':'single-tooth-cap',
      'Resin-Embedded Specials':'resin-embedded-specials',
      'Hoops':'hoops',
      'Studs':'studs',
      'Dangles':'dangles',
      'Full-Cover Press-Ons':'full-cover-press-ons',
      'Accent Tips':'accent-tips',
      'Resin-Embedded Nails':'resin-embedded-nails'
    };

    function normalizeSlugInput(raw){
      if(!raw) return '';
      let s = String(raw).trim().toLowerCase();
      s = s.replace(/[%20\+_]+/g,'-');
      s = s.replace(/[^\w-]+/g,'-');
      s = s.replace(/-+/g,'-');
      s = s.replace(/^-|-$/g,'');
      return s;
    }
    function slugForDisplay(display){
      if(!display) return '';
      if(displayToSlug[display]) return displayToSlug[display];
      return normalizeSlugInput(display);
    }

    // Demo product generator — keep small values for merch price ranges
    const categories = ['Grillz','Earrings','Nail Jewelry','aL vaLe','Veerwear','Accessories'];
    const materials = ['Cotton','Poly Blend','Vinyl','Print','Resin'];
    const products = [];
    const TOTAL_ITEMS = 60;
    function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

    function buildDemoProducts(){
      products.length = 0;
      for(let i=1;i<=TOTAL_ITEMS;i++){
        const cat = categories[i % categories.length];
        const mat = materials[i % materials.length];
        const price = (cat === 'aL vaLe' || cat === 'Veerwear') ? rand(18,120) : rand(20,300);
        const sold = rand(0,2000);
        const featured = i % 7 === 0;
        const date = new Date(Date.now() - rand(0,365)*24*3600*1000).toISOString();
        const pool = subtypesMap[cat] || ['General'];
        const subtype = pool[rand(0, pool.length-1)];
        const technique = techniqueFromSubtype(subtype) || (Math.random() < 0.12 ? '3D Sculpt' : '');
        products.push({
          id:i,
          title:`${subtype} ${cat} ${i}`,
          description:`${mat} · ${cat} · ${subtype}`,
          image:`/images/placeholder-${(i%10)+1}.jpg`,
          price,
          category:cat,
          material:mat,
          subtype,
          technique,
          soldCount:sold,
          featured,
          date
        });
      }
    }

    // Favorites (localStorage)
    function readFavorites(){
      try{ return new Set(JSON.parse(localStorage.getItem('sb_favorites') || '[]')); } catch(e){ return new Set(); }
    }
    function writeFavorites(set){
      try { localStorage.setItem('sb_favorites', JSON.stringify(Array.from(set))); } catch(e) { console.warn('Could not write favorites', e); }
    }

    function escapeHtml(s){
      if(!s) return '';
      return String(s).replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; });
    }
    function escapeAttr(s){ return escapeHtml(String(s)); }

    // === Category-specific functions (render subtype links + curated grid) ===
    function initCategoryHeroAndLinks(){
      // hero & links
      const viewAllHref = `/AllProducts/?category=${encodeURIComponent(CATEGORY_SLUG)}`;
      document.querySelectorAll('[href="/AllProducts/?category=CATEGORY_SLUG"]').forEach(a => a.href = viewAllHref);
      document.getElementById('viewAllBtn')?.setAttribute('href', viewAllHref);
      document.getElementById('viewAllTop')?.setAttribute('href', viewAllHref);
      document.getElementById('viewAllBottom')?.setAttribute('href', viewAllHref);
      document.getElementById('linkViewAll')?.setAttribute('href', viewAllHref);

      // subtype links container
      const container = document.getElementById('subtypeLinks');
      if(!container) return;
      container.innerHTML = '';

      const subtypeList = (Array.isArray(SUBTYPES) && SUBTYPES.length) ? SUBTYPES.slice() : (subtypesMap[CATEGORY_NAME] || []);

      subtypeList.forEach(name => {
        const count = products.filter(p => p.category === CATEGORY_NAME && p.subtype === name).length;
        const slug = slugForDisplay(name);
        const href = `/AllProducts/?category=${encodeURIComponent(CATEGORY_SLUG)}&style=${encodeURIComponent(slug)}`;

        // Outer flex wrapper (link + share)
        const outer = document.createElement('div');
        outer.className = 'flex items-center justify-between gap-2';

        // Main pill link: clicking either navigates to the AllProducts filtered URL
        const a = document.createElement('a');
        a.className = 'subtype-link flex-1';
        a.href = href;
        a.setAttribute('title', `Open ${name}`);
        a.innerHTML = `<span>${escapeHtml(name)}</span><span class="subtype-badge">${count}</span>`;

        // Share button (copy link or open new tab)
        const shareBtn = document.createElement('button');
        shareBtn.className = 'share-btn';
        shareBtn.type = 'button';
        shareBtn.title = 'Copy direct link';
        shareBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M15 7h4v10a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7h4"></path><path d="M8 7V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v3"></path></svg>`;

        // Share action: copy to clipboard; fallback open new tab
        shareBtn.addEventListener('click', async (ev) => {
          ev.preventDefault();
          const url = window.location.origin + href;
          try {
            if(navigator.clipboard && navigator.clipboard.writeText){
              await navigator.clipboard.writeText(url);
              showShareToast('Link copied to clipboard');
            } else {
              // textarea fallback
              const ta = document.createElement('textarea');
              ta.value = url; ta.style.position = 'fixed'; ta.style.left = '-9999px';
              document.body.appendChild(ta); ta.select();
              document.execCommand('copy'); ta.remove();
              showShareToast('Link copied to clipboard');
            }
          } catch(err){
            console.warn('Clipboard failed; opening in new tab', err);
            window.open(url, '_blank');
          }
        });

        // Middle-click opens link in new tab as well
        shareBtn.addEventListener('auxclick', (ev) => {
          if(ev.button === 1){
            ev.preventDefault();
            const url = window.location.origin + href;
            window.open(url, '_blank');
          }
        });

        outer.appendChild(a);
        const btnwrap = document.createElement('div');
        btnwrap.style.display = 'flex';
        btnwrap.style.alignItems = 'center';
        btnwrap.appendChild(shareBtn);
        outer.appendChild(btnwrap);
        container.appendChild(outer);
      });
    }

    function showShareToast(msg){
      const id = 'share-toast';
      if(document.getElementById(id)) return;
      const div = document.createElement('div');
      div.id = id;
      div.className = 'share-toast';
      div.textContent = msg;
      document.body.appendChild(div);
      setTimeout(()=> {
        div.style.transition = 'opacity .3s ease';
        div.style.opacity = '0';
        setTimeout(()=> { div.remove(); }, 350);
      }, 1400);
    }

    function findProductById(id){
      if(typeof products !== 'undefined' && Array.isArray(products)){
        return products.find(p => Number(p.id) === Number(id));
      }
      if(window.PRODUCTS && typeof window.PRODUCTS === 'object'){
        return window.PRODUCTS[id] || Object.values(window.PRODUCTS).find(x => x.id == id);
      }
      return null;
    }

    // Render curated products (mirrors Grin & Glisten curated layout; Snipcart-ready)
    function renderCuratedProducts(){
      const grid = document.getElementById('curatedGrid');
      if(!grid) return;
      grid.innerHTML = '';

      let productObjs = (Array.isArray(CURATED_IDS) && CURATED_IDS.length)
        ? CURATED_IDS.map(id => findProductById(id)).filter(Boolean)
        : [];

      if(productObjs.length === 0){
        // fallback: featured items from this category
        productObjs = products.filter(p => p.category === CATEGORY_NAME).sort((a,b) => (b.featured?1:0) - (a.featured?1:0)).slice(0,6);
      }

      if(productObjs.length === 0){
        grid.innerHTML = '<div class="p-6 bg-white/3 rounded-lg text-center">No curated items configured. Edit <code>CURATED_IDS</code> or ensure your product dataset is loaded.</div>';
        return;
      }

      const favSet = readFavorites();

      for(const p of productObjs){
        const fontClass = (p.category === 'Veerwear') ? 'veerwear' : (p.category === 'aL vaLe' ? 'font-plunct' : 'font-plunct');
        const heartActive = favSet.has(Number(p.id));
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <div class="relative overflow-hidden h-64">
            <img src="${escapeAttr(p.image || '/images/placeholder-1.jpg')}" alt="${escapeAttr(p.title || '')}" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"></div>
            ${p.featured ? `<div class="absolute top-3 left-3 badge-gold">BESTSELLER</div>` : ''}
            <button class="absolute top-3 right-3 heart-btn ${heartActive ? 'heart-active' : ''}" data-id="${escapeAttr(p.id)}" title="Save to favorites" style="background:rgba(255,255,255,0.06); border-radius:9999px; width:36px; height:36px; display:flex; align-items:center; justify-content:center;">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="${heartActive ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="1.5"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"/></svg>
            </button>
          </div>
          <div class="p-4">
            <h3 class="font-medium mb-1 ${fontClass}" style="color:var(--white);">${escapeHtml(p.title || '')}</h3>
            <p class="${fontClass} text-gray-300 text-sm mb-2" style="color:var(--white);">${escapeHtml(p.description || '')}</p>
            <div class="flex justify-between items-center">
              <span class="${fontClass} font-bold" style="color:var(--white);">$${(Number(p.price)||0).toLocaleString()}</span>
              <button class="snipcart-add-item inline-flex items-center px-3 py-2 rounded text-sm border border-transparent bg-yellow-400 hover:bg-yellow-500"
                data-item-id="${escapeAttr(p.id)}"
                data-item-name="${escapeAttr(p.title || '')}"
                data-item-price="${escapeAttr(p.price||0)}"
                data-item-url="/AllProducts/"
                data-item-description="${escapeAttr(p.description||'')}"
                data-item-image="${escapeAttr(p.image||'')}">
                Add to cart
              </button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      }

      // bind heart toggles
      grid.querySelectorAll('.heart-btn').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          const id = Number(btn.getAttribute('data-id'));
          const s = readFavorites();
          if(s.has(id)) s.delete(id); else s.add(id);
          writeFavorites(s);
          renderCuratedProducts();
        });
      });

      feather.replace();
    }

    /* --------------------------
       Simple header search behavior (kept minimal)
       (From earlier site: when user submits, route to search.html?q=)
    -------------------------- */
    function initHeaderSearch(){
      // This demo page doesn't render a desktop search input by default;
      // if you add an input with ID headerSearchInput, include logic here.
    }

    // Mobile search (if you include mobileSearchForm)
    function initMobileSearch(){ /* no-op unless you add the forms */ }

  </script>
</body>
</html>
